<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width"><meta name=theme-color content="#222" media="(prefers-color-scheme: dark)"><meta name=generator content="Hugo 0.102.3"><link rel="shortcut icon" type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/x-icon href=/imgs/icons/favicon.ico><link rel=icon type=image/png sizes=16x16 href=/imgs/icons/favicon_16x16_next.png><link rel=icon type=image/png sizes=32x32 href=/imgs/icons/favicon_32_32_next.png><link rel=apple-touch-icon sizes=180x180 href=/imgs/icons/apple_touch_icon_next.png><meta itemprop=name content="远程工作方式"><meta itemprop=description content="佛系写博客"><meta itemprop=datePublished zgotmplz><meta itemprop=dateModified zgotmplz><meta itemprop=image content="/imgs/avatar.webp"><meta itemprop=keywords content="Remote,SSH,Proxy"><meta property="og:type" content="article"><meta property="og:title" content="远程工作方式"><meta property="og:description" content="佛系写博客"><meta property="og:image" content="/imgs/avatar.webp"><meta property="og:image:width" content="312"><meta property="og:image:height" content="312"><meta property="og:image:type" content="image/jpeg/png/svg/jpg"><meta property="og:url" content="/post/remote-work/2020/"><meta property="og:site_name" content="Baitian's Blog"><meta property="og:locale" content="zh-CN"><meta property="article:author" content="Baitian"><meta property="article:published_time" content="2020-03-09 22:06:23 +0800 +0800"><meta property="article:modified_time" content="2020-03-09 22:06:23 +0800 +0800"><link type=text/css rel=stylesheet href=https://unpkg.com/@fortawesome/fontawesome-free@6.1.2/css/all.min.css><link type=text/css rel=stylesheet href=https://unpkg.com/animate.css@3.1.1/animate.min.css><link rel=stylesheet href=/css/main.min.9471f4000d900cf2ec29bf55bf6a7ba039d4e1ba2e78c3612a6a947f8f44533a.css><style type=text/css>.post-footer,.flinks-list-footer hr:after{content:"~ 我可是有底线的哟 ~"}</style><script class=next-config data-name=page type=application/json>{"comments":true,"isHome":false,"isPage":true,"path":"2020","permalink":"/post/remote-work/2020/","title":"远程工作方式"}</script><script type=text/javascript>document.addEventListener("DOMContentLoaded",()=>{var e=document.createElement("script");e.charset="UTF-8",e.id="LA_COLLECT",e.src="https://sdk.51.la/js-sdk-pro.min.js",e.async="true",e.onload=function(){},document.head.appendChild(e)})</script><title>远程工作方式 - Baitian's Blog</title><noscript><link rel=stylesheet href=/css/noscript.css></noscript></head><body itemscope itemtype=http://schema.org/WebPage class=use-motion><div class=headband></div><main class=main><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=header-inner><div class=site-brand-container><div class=site-nav-toggle><div class=toggle aria-label=切换导航栏 role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div></div><div class=site-meta><a href=/ class=brand rel=start><i class=logo-line></i><h1 class=site-title>Baitian's Blog</h1><i class=logo-line></i></a><p class=site-subtitle itemprop=description>零零碎碎的技术分享</p></div><div class=site-nav-right><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ class=hvr-icon-pulse rel=section><i class="fa fa-home hvr-icon"></i>首页</a></li><li class="menu-item menu-item-archives"><a href=/archives/ class=hvr-icon-pulse rel=section><i class="fa fa-archive hvr-icon"></i>归档
<span class=badge>7</span></a></li><li class="menu-item menu-item-search"><a role=button class="popup-trigger hvr-icon-pulse"><i class="fa fa-search fa-fw hvr-icon"></i>搜索</a></li></ul></nav><div class=search-pop-overlay><div class="popup search-popup"><div class=search-header><span class=search-icon><i class="fa fa-search"></i></span><div class=search-input-container><input autocomplete=off autocapitalize=off maxlength=80 placeholder=搜索... spellcheck=false type=search class=search-input></div><span class=popup-btn-close role=button><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class=search-result-icon><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role=button><span class=toggle-line></span>
<span class=toggle-line></span>
<span class=toggle-line></span></div><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录</li><li class=sidebar-nav-overview>站点概览</li></ul><div class=sidebar-panel-container><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><nav id=TableOfContents><ul><li><ul><li><a href=#ssh-代理>SSH 代理</a><ul><li><a href=#本地代理>本地代理</a></li><li><a href=#反向代理>反向代理</a></li><li><a href=#动态端口映射socks-代理>动态端口映射（Socks 代理）</a></li></ul></li><li><a href=#远程桌面>远程桌面</a><ul><li><a href=#ssh-x-serverclient>SSH X Server/Client</a></li><li><a href=#vnc>VNC</a></li><li><a href=#teamviewer>TeamViewer</a></li><li><a href=#rdp>RDP</a></li></ul></li><li><a href=#远程开发>远程开发</a><ul><li><a href=#vsc-ssh-远程主机>VSC SSH 远程主机</a></li><li><a href=#vsc-docker-容器>VSC Docker 容器</a></li><li><a href=#vsc-wsl>VSC WSL</a></li></ul></li><li><a href=#web-服务>Web 服务</a></li><li><a href=#其他用法>其他用法</a><ul><li><a href=#配置-ssh-为长连接>配置 SSH 为长连接</a></li><li><a href=#搭建公共代理>搭建公共代理</a></li><li><a href=#ssh-跳板机登录>SSH 跳板机登录</a></li></ul></li></ul></li></ul></nav></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop=author itemscope itemtype=http://schema.org/Person><img class=site-author-image itemprop=image alt=Baitian src=/imgs/avatar.webp><p class=site-author-name itemprop=name>Baitian</p><div class=site-description itemprop=description>佛系写博客</div></div><div class="site-state-wrap site-overview-item animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/><span class=site-state-item-count>7</span>
<span class=site-state-item-name>日志</span></a></div><div class="site-state-item site-state-categories"><a href=/categories/><span class=site-state-item-count>3</span>
<span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/><span class=site-state-item-count>10</span>
<span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-social site-overview-item animated"><span class=links-of-social-item><a href=https://github.com/baitian752 title="Github → https://github.com/baitian752" rel=noopener class=hvr-icon-pulse target=_blank><i class="fab fa-github fa-fw hvr-icon"></i>Github</a></span></div><div class="cc-license animated" itemprop=license><a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh class=cc-opacity rel=noopener target=_blank title=共享知识><img src=/imgs/cc/big/by_nc_sa.svg alt=共享知识></a></div><div class="links-of-blogroll site-overview-item animated"><div class=links-of-blogroll-title><i class="fa fa-globe fa-fw"></i>友情链接</div><ul class=links-of-blogroll-list><li class=links-of-blogroll-item><a href=https://github.com/hugo-next/hugo-theme-next title=https://github.com/hugo-next/hugo-theme-next target=_blank>Hugo-NexT</a></li></ul></div></div></div></div></aside><div class=sidebar-dimmer></div></header><div class=back-to-top role=button aria-label=返回顶部><i class="fa fa-arrow-up"></i>
<span>0%</span></div><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class=post-block><article itemscope itemtype=http://schema.org/Article class=post-content lang><link itemprop=mainEntityOfPage href=/post/remote-work/2020/><span hidden itemprop=author itemscope itemtype=http://schema.org/Person><meta itemprop=image content="/imgs/avatar.webp"><meta itemprop=name content="Baitian"></span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization><meta itemprop=name content="Baitian"><meta itemprop=description content="佛系写博客"></span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork><meta itemprop=name content="远程工作方式"><meta itemprop=description content="SSH 代理 从 SSH 说起，基本的使用就不说了，首先介绍它支持的三种代理方式（在 Unix-like 环境下基本都可以用 man ssh 查到）。 本地代理 1 ssh -L [<本机地址>"></span><header class=post-header><h1 class=post-title itemprop="name headline">远程工作方式</h1><div class=post-meta-container><div class=post-meta-items><span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-calendar"></i></span>
<span class=post-meta-item-text>发表于：</span>
<time title="发表于：2020-03-09 22:06:23 +0800 +0800" itemprop="dateCreated datePublished" datetime="2020-03-09 22:06:23 +0800 +0800">2020-03-09</time></span>
<span class=post-meta-item><span class=post-meta-item-icon><i class="far fa-folder-open"></i></span>
<span class=post-meta-item-text>分类于：</span>
<span itemprop=about itemscope itemtype=http://schema.org/Thing><a href=/categories/work itemprop=url rel=index><span itemprop=name>Work</span></a></span></span></div><div class=post-meta-items><span class=post-meta-item title=字数><span class=post-meta-item-icon><i class="far fa-file-word"></i></span>
<span class=post-meta-item-text>字数：</span><span>3428</span></span>
<span class=post-meta-item title=阅读><span class=post-meta-item-icon><i class="far fa-clock"></i></span>
<span class=post-meta-item-text>阅读：&ap;</span>
<span>7分钟</span></span></div></div></header><div class=post-body itemprop=articleBody><h2 id=ssh-代理>SSH 代理</h2><p>从 SSH 说起，基本的使用就不说了，首先介绍它支持的三种代理方式（在 Unix-like 环境下基本都可以用 <code>man ssh</code> 查到）。</p><h3 id=本地代理>本地代理</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -L <span style=color:#f92672>[</span>&lt;本机地址&gt;:<span style=color:#f92672>]</span>&lt;本机端口&gt;:&lt;服务器地址1&gt;:&lt;服务器端口&gt; &lt;用户&gt;@&lt;服务器地址2&gt; <span style=color:#f92672>[</span>-p &lt;服务器 SSH 端口&gt;<span style=color:#f92672>]</span>
</span></span></code></pre></td></tr></table></div></div><p>（<code>&lt;x></code> 表示变量，<code>[x]</code> 是可选参数）<br><code>&lt;本机地址></code> 默认为 <code>127.0.0.1</code> 或 <code>localhost</code><br><code>&lt;服务器 SSH 端口></code> 默认为 <code>22</code></p><p>这会将 <code>&lt;本机地址>:&lt;本机端口></code> 网络请求转发到 <code>&lt;服务器地址1>:&lt;服务器端口></code> 。</p><p>下面用 MobaXterm 带的 Cygwin 环境看看具体用途：</p><p>首先直接 SSH 登录服务器：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh root@baitian.xyz
</span></span></code></pre></td></tr></table></div></div><p>在当前目录新建一个 <code>index.html</code> 文件，用来测试 Web 访问，内容如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>&lt;<span style=color:#f92672>html</span>&gt;&lt;<span style=color:#f92672>body</span>&gt;&lt;<span style=color:#f92672>h1</span>&gt;Hello Boy!&lt;/<span style=color:#f92672>h1</span>&gt;&lt;/<span style=color:#f92672>body</span>&gt;&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></td></tr></table></div></div><p><img src=html-content.jpg alt=html-content></p><p>启动一个 HTTP 服务：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>python3 <span style=color:#f92672>-</span>m http<span style=color:#f92672>.</span>server <span style=color:#f92672>--</span>bind <span style=color:#ae81ff>172.17.0.1</span> <span style=color:#ae81ff>8000</span>
</span></span></code></pre></td></tr></table></div></div><p>这会在 <code>172.17.0.1:8000</code> 以当前目录启动 HTTP 服务，我的服务器公网地址是 <code>baitian.xyz</code>，但我的服务器无法将 HTTP 服务绑定到这个地址，因为公网地址是云服务器提供商那一层绑定的，我的服务器用 <code>ip a</code> 或是 <code>ifconfig</code> 等命令都看不到公网地址（如果是直接在公网开启 HTTP 服务，并配置好防火墙规则，是可以直接用公网访问的，其实我用内网 <code>192.168.1.116</code> 地址就会直接绑定到公网，当然，这都是提供商做的映射）。</p><p><img src=http-server.webp alt=http-server></p><p>此时，我在本机用地址
<a href=http://172.17.0.1:8000 title=http://172.17.0.1:8000 rel="noopener external nofollow noreferrer" target=_blank class=exturl>http://172.17.0.1:8000
<i class="fa fa-external-link-alt"></i></a> 访问 HTTP 服务：</p><p><img src=access-failed.webp alt=access-failed></p><p>其实，这是不该有的操作，<code>172.*.*.*</code> 这个是内网地址，不在同一网段是无法直接访问的，但也别太拘泥于什么内网，外网/公网的，本文的目的就是模糊这些，消除访问限制。</p><p>开启本地代理：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -L 8000:172.17.0.1:8000 root@baitian.xyz
</span></span></code></pre></td></tr></table></div></div><p><img src=local-proxy.webp alt=local-proxy></p><p>然后：</p><p><img src=access-success.webp alt=access-success></p><p>这就是本地代理。</p><p>(如果按 <code>&lt;Ctrl + D></code> 无法断开 SSH 代理的连接，请先关闭浏览器窗口)</p><h3 id=反向代理>反向代理</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -R <span style=color:#f92672>[</span>&lt;forward ip&gt;:<span style=color:#f92672>]</span>&lt;forward port&gt;:&lt;local ip&gt;:&lt;local port&gt; &lt;user&gt;@&lt;server&gt; <span style=color:#f92672>[</span>-p &lt;server SSH port&gt;<span style=color:#f92672>]</span>
</span></span></code></pre></td></tr></table></div></div><p>和前面的本地代理的区别只是本机和转发的 IP 及端口调换了，也即反向代理，相对地把那个本地代理叫正向代理也成。</p><p>这可以将服务器 <code>&lt;forward ip>:&lt;forward port></code> 的请求转发到本机 <code>&lt;local ip>:&lt;local port></code>，但本机一般是 PC，不开什么服务的，所以使用得较本地代理更少，一般就是用来“穿墙”的：登录到学校内部的电脑、公司内部的电脑、操作家里的玩意儿。</p><p>下面模拟一下具体使用：</p><p><img src=container-network.webp alt=container-network></p><p>这是我在自己电脑上启动的一个 Ubuntu 容器的网络情况，在没有任何设置的情况下我连不上，包括任何网络请求。由于容器类型设置的 Windows Container，网关也无法访问。</p><p><img src=ping-failed.webp alt=ping-failed></p><p>Ubuntu 容器反向代理连接服务器：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -R 192.168.1.116:8000:127.0.0.1:22 root@baitian.xyz
</span></span></code></pre></td></tr></table></div></div><p><img src=reverse-proxy.webp alt=reverse-proxy></p><p>确保服务器的 8000 端口没有被防火墙拦截，最简单的方式是（但是得安装 ufw，没有的话可以用 iptables；如果是云服务器/VPS 的话，厂商可能还存在一层防火墙，注意在服务器后台管理设置相应安全组规则）：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ufw allow <span style=color:#ae81ff>8000</span>
</span></span></code></pre></td></tr></table></div></div><p>以及服务器的 SSH 配置 <code>/etc/ssh/sshd_config</code> 存在以下配置（修改配置后得重启 SSH 服务）：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>GatewayPorts yes
</span></span></code></pre></td></tr></table></div></div><p>此时便可通过服务器连接到 Ubuntu 容器：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh root@baitian.xyz -p <span style=color:#ae81ff>8000</span>
</span></span></code></pre></td></tr></table></div></div><p>(注：我的服务器内网地址 <code>192.168.1.116</code> 是直接和公网地址 <code>baitian.xyz</code> 在上层映射的，Ubuntu 容器要么配置允许 root 用户密码登录并设置密码，要么设置秘钥对登录。)</p><p><img src=reverse-proxy-ssh.webp alt=reverse-proxy-ssh></p><h3 id=动态端口映射socks-代理>动态端口映射（Socks 代理）</h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -D <span style=color:#f92672>[</span>&lt;local ip&gt;:<span style=color:#f92672>]</span>&lt;local port&gt; &lt;user&gt;@&lt;server&gt; <span style=color:#f92672>[</span>-p &lt;server SSH port&gt;<span style=color:#f92672>]</span>
</span></span></code></pre></td></tr></table></div></div><p>这会在本地 <code>&lt;local ip>:&lt;local port></code> 开启一个 Socks 5 代理，代理服务器为 SSH 连接的服务器。</p><p>再看本地代理中的例子：</p><p>开启 Socks 代理：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -D <span style=color:#ae81ff>1080</span> root@baitian.xyz
</span></span></code></pre></td></tr></table></div></div><p>本地 <code>127.0.0.1:1080</code> 为 Socks 5 代理。</p><p>开启 HTTP 服务：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>python3 -m http.server --bind 192.168.1.116 <span style=color:#ae81ff>8001</span>
</span></span></code></pre></td></tr></table></div></div><p><img src=dynamic-proxy.webp alt=dynamic-proxy></p><p>浏览器配置代理：</p><ul><li>Microsoft Edge (Chromium)</li></ul><p><img src=edge-proxy.webp alt=edge-proxy></p><ul><li>Google Chrome</li></ul><p><img src=chrome-proxy.webp alt=chrome-proxy></p><ul><li>Mozilla Firefox</li></ul><p><img src=firefox-proxy.webp alt=firefox-proxy></p><p>不建议命令行那么使用代理，命令行那样启动的话，比如 Chrome，得先把 Chrome 的所有窗口关掉，Edge 也是（这里是新版的 Edge，和 Chrome 差不多，旧版 Edge 在更新的 Windows 10 会消失），有条件可以使用 SwitchyOmega 插件（需要 FQ）。</p><h2 id=远程桌面>远程桌面</h2><h3 id=ssh-x-serverclient>SSH X Server/Client</h3><p>我以前对这个的客户端和服务端的理解是反的，其实这一套里面自己的 PC 一般充当服务端，服务器充当客户端，服务器调用 PC 的服务。</p><p>所以，直接使用原生 SSH 提供的 X（可以叫 X11）转发的话 PC 需要安装 X Server，可以安装
<a href=https://sourceforge.net/projects/vcxsrv/ title=VcXsrv rel="noopener external nofollow noreferrer" target=_blank class=exturl>VcXsrv
<i class="fa fa-external-link-alt"></i>
</a>，安装好后启动。先设置好 <code>DISPLAY</code> 环境变量，然后 SSH 连接服务器。</p><p><img src=display-env.webp alt=display-env></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -Y root@baitian.xyz
</span></span></code></pre></td></tr></table></div></div><p><img src=x11-forward.webp alt=x11-forward></p><div class=note>Windows 用户推荐使用 MobaXterm 作为 SSH 客户端，集成了 X Server，可以方便使用，也可以开各种隧道（也就是前文所说的代理）。</div><h3 id=vnc>VNC</h3><p>我已经好久没用过了，就不写了，网上也有许多资料。</p><h3 id=teamviewer>TeamViewer</h3><p>我没用过，就不说了。</p><p>但我知道这个可以穿透内网，这是很大的一个优势，VNC 可能需要结合代理才行。</p><h3 id=rdp>RDP</h3><p>Windows 下的远程桌面，使用 Windows 服务器可能会用到</p><p>对于这些方式的优劣我没有什么见解，只知道网络好的话都没问题，网络不行都有问题&mldr;</p><h2 id=远程开发>远程开发</h2><p>看到这里，我想你肯定是一名程序员吧，如果你还没用过
<a href=https://code.visualstudio.com/ title="Visual Studio Code" rel="noopener external nofollow noreferrer" target=_blank class=exturl>Visual Studio Code
<i class="fa fa-external-link-alt"></i></a> (VSC)，我强烈推荐你使用，因为这一节都是它，希望你能体会到它的好用。</p><p>安装插件 Remote Development。</p><p>这个插件包含三种远程连接方式：</p><ol><li>SSH (OpenSSH Server)</li><li>Container (Docker)</li><li>WSL (Windows Subsystem for Linux)</li></ol><h3 id=vsc-ssh-远程主机>VSC SSH 远程主机</h3><p>首先，需要了解一个叫
<a href=https://linux.die.net/man/5/ssh_config title="SSH Config" rel="noopener external nofollow noreferrer" target=_blank class=exturl>SSH Config
<i class="fa fa-external-link-alt"></i></a> 的东西, 其实很简单，就是规定了 SSH 连接的配置，不用连接时指定那么多参数。</p><p>比如，我在 <code>C:\Users\baitian\.ssh\config</code> 文件存在配置（注意，用户名用自己的）：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Host aliyun
</span></span><span style=display:flex><span>    HostName baitian.xyz
</span></span><span style=display:flex><span>    Port <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>    User root
</span></span><span style=display:flex><span>    IdentityFile ~/.ssh/baitian752
</span></span></code></pre></td></tr></table></div></div><p>我就可以直接通过命令 <code>ssh aliyun</code> 连接到我的阿里云服务器了。</p><p><img src=ssh-config.webp alt=ssh-config></p><p>同时，VSC 的远程插件可以识别出配置的远程主机：</p><p><img src=vscode-ssh-targets.webp alt=vscode-ssh-targets></p><p>连接上去，左下角显示 SSH: aliyun 表示连接成功（第一次连接时由于要安装服务端时间会久一些）：</p><p><img src=remote-ssh.webp alt=remote-ssh></p><p>打开一个远程项目，然后，所有操作如本地一般：</p><p><img src=remote-ssh-workspace.webp alt=remote-ssh-workspace></p><p>如果要使用 X Server，修改 <code>C:\Users\baitian\.ssh\config</code> 如下：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Host aliyun
</span></span><span style=display:flex><span>    HostName baitian.xyz
</span></span><span style=display:flex><span>    Port <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>    User root
</span></span><span style=display:flex><span>    IdentityFile ~/.ssh/baitian752
</span></span><span style=display:flex><span>    ForwardX11 yes
</span></span><span style=display:flex><span>    ForwardX11Trusted yes
</span></span></code></pre></td></tr></table></div></div><p>配置好 <code>DISPLAY</code> 环境变量，启动 VcXsrv，重新打开项目。此时，便可在服务器通过 X Client 在本地显示图形界面：</p><p><img src=remote-ssh-x11.webp alt=remote-ssh-x11></p><h3 id=vsc-docker-容器>VSC Docker 容器</h3><p>连接本机的 Docker 容器，但这种玩儿法在 Windows 下对内存需求比较高，估计 12GB 及以上才能比较爽，和上面相比一方面是 Docker 的优势，另一方面是带宽，毕竟这是在本机。</p><p><img src=remote-container.webp alt=remote-container></p><h3 id=vsc-wsl>VSC WSL</h3><p>我目前不推荐使用 WSL，因为 WSL 系统有诸多限制，和容器差不多的，比如，基于 <code>systemctl</code> 服务是跑不了的（和系统的启动方式有关，这是很底层的东西了，我没有什么了解），和 Docker 相比还有一个巨大的不足，磁盘 I/O 巨慢。也听闻 WSL 2 许久了，测试过一次，还是没感觉好用，而且需要预览版 Windows 10 才能体验 WSL 2。</p><p>我的观点是，内存足够的话，目前完全没必要使用 WSL，Docker 的各方面体验都比 WSL 好；内存不够的话，用 SSH 连接远程主机吧，不用图形界面的话对网络带宽要求也不高。</p><h2 id=web-服务>Web 服务</h2><p>以上提到的各种方式，其实对 Web 服务是最友好的，因为浏览器是一个天然的图形界面，服务器发送数据，浏览器进行渲染就行了，可以降低许多传输带宽。设置好代理（浏览器也可以很方便设置代理），此刻，你便会感觉犹如本地开发一样。</p><p>比如，用过 Anaconda 的对 Jupyter Notebook 大都不陌生吧，这便是一个浏览器端的应用【这是一个很强大的应用，可以安装许多被称之为
<a href=https://github.com/jupyter/jupyter/wiki/Jupyter-kernels title=kernel rel="noopener external nofollow noreferrer" target=_blank class=exturl>kernel
<i class="fa fa-external-link-alt"></i></a> 的模块，可以在线使用 C/C++, Wolfram Mathematica, gnuplot, Octave, R 等等好多好多语言】；再比如，OverLeaf，一个在线的 LaTeX IDE（用过之后我就再没碰过 TexLive 了）。</p><p><img src=jupyter-notebook.webp alt=jupyter-notebook></p><h2 id=其他用法>其他用法</h2><h3 id=配置-ssh-为长连接>配置 SSH 为长连接</h3><p>默认情况下，SSH 连接长时间没发送数据的话会自动断开，可以在服务器的 <code>/etc/ssh/sshd_config</code> 作如下配置：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ClientAliveInterval <span style=color:#ae81ff>60</span>
</span></span><span style=display:flex><span>ClientAliveCountMax <span style=color:#ae81ff>3</span>
</span></span></code></pre></td></tr></table></div></div><p>这样配置每过 60 秒会发送一个数据包，保持连接为活动状态，当然也可以在客户端配置（就我个人而言，客户端是远多于服务端的，所以一般在服务端配置更省事）<code>C:\Users\baitian\.ssh\config</code> ：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>Host aliyun
</span></span><span style=display:flex><span>    HostName baitian.xyz
</span></span><span style=display:flex><span>    Port <span style=color:#ae81ff>22</span>
</span></span><span style=display:flex><span>    User root
</span></span><span style=display:flex><span>    IdentityFile ~/.ssh/baitian752
</span></span><span style=display:flex><span>    ServerAliveInterval <span style=color:#ae81ff>60</span>
</span></span><span style=display:flex><span>    ServerAliveCountMax <span style=color:#ae81ff>3</span>
</span></span></code></pre></td></tr></table></div></div><p>暂时使用：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh &lt;user&gt;@&lt;server&gt; -o ServerAliveInterval<span style=color:#f92672>=</span><span style=color:#ae81ff>60</span> -o ServerAliveCountMax<span style=color:#f92672>=</span><span style=color:#ae81ff>3</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=搭建公共代理>搭建公共代理</h3><p>服务器自己 SSH 连接自己开启动态端口映射：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -D &lt;public ip&gt;:&lt;port&gt; &lt;user&gt;@127.0.0.1
</span></span></code></pre></td></tr></table></div></div><p>同时防火墙开启服务器的 <code>&lt;port></code> 端口，能够访问公网的机器便都可以使用 <code>&lt;public ip>:&lt;port></code> 作为 Socks 5 代理了。</p><p>这里公网只是相对的，比如我自己电脑经过路由器后 IP 为 <code>192.168.1.8</code>，那么，我通过以下方式：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -D 192.168.1.8:1080 &lt;user&gt;@&lt;server ip&gt;
</span></span></code></pre></td></tr></table></div></div><p>可以在自己电脑所属的路由器子网搭建一个 Socks 5 代理（<code>192.168.1.8:1080</code>），便可局限在一个相对小的范围内共享 <code>&lt;server ip></code> 的网络了。</p><div class=note>结合 SSH 长连接，可以搭建一个持久化的代理。</div><h3 id=ssh-跳板机登录>SSH 跳板机登录</h3><p>有时候存在以下情况：只能通过跳板机 <code>&lt;server1></code> 连接其他服务器（比如 <code>&lt;server2></code>），而 <code>&lt;server1></code> 的权限给的很低，路由，SSH 配置都不能修改。</p><p>此时，想直接登录 <code>&lt;server2></code>，可以用前面提到的反向代理方式，但这种方式需要一台有 root 权限（需要修改 SSH 服务端配置）的公网服务器，所示处理这种情况并不好。</p><p>SSH 本身就支持跳板登录:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh -J &lt;user1&gt;@&lt;server1&gt; &lt;user2&gt;@&lt;server2&gt;
</span></span></code></pre></td></tr></table></div></div><p>这会登录到 <code>&lt;server2></code>，如果配置上代理，代理服务器是 <code>&lt;server2></code> 。</p><p>当然，还可以使用 <code>&lt;server1></code> 作为代理服务器，连接 <code>&lt;server2></code>：</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>ssh &lt;user2&gt;@&lt;server2&gt; -o ProxyCommand<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;ssh.exe -W %h:%p &lt;user1&gt;@&lt;server1&gt;&#34;</span>
</span></span></code></pre></td></tr></table></div></div><div class=note>如果是 Windows 10 自带的 OpenSSH 客户端，注意里面的 ssh.exe 不能改成 ssh；DISPLAY 环境变量也可能导致错误，需要时删除该环境变量，或者使用 Git for Windows 的 SSH 客户端，或是 MSYS2 的 SSH 客户端（未测试）；最好是配置 SSH 秘钥对登录，更安全、省事，如果实在是无法配置秘钥对，又不想手动输入密码，可以考虑 sshpass。</div></div><footer class=post-footer><div class=post-tags><a href=/tags/remote>Remote</a>
<a href=/tags/ssh>SSH</a>
<a href=/tags/proxy>Proxy</a></div><div class=addthis_inline_share_toolbox style=text-align:center></div><hr><div class=post-copyright><img src=/imgs/cc/cc.svg width=75 height=75 align=right><ul><li class=post-copyright-title><strong>文章标题：</strong>
远程工作方式</li><li class=post-copyright-author><strong>本文作者：</strong>
Baitian</li><li class=post-copyright-link><strong>本文链接：</strong>
<a id=post-cr-link href=/post/remote-work/2020/ title=远程工作方式>/post/remote-work/2020/</a></li><li class=post-copyright-license><strong>版权声明：</strong>
本博客所有文章除特别声明外，均采用 <i class="fab fa-fw fa-creative-commons"></i><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class=post-nav><div class="post-nav-next post-nav-item"><a href=/post/sicp/learn-sicp-ch3/ rel=next title="Learn SICP Chapter 3"><i class="fa fa-chevron-left"></i> Learn SICP Chapter 3</a></div><div class="post-nav-prev post-nav-item"><a href=/post/openstack/ubuntu-18-04-kolla-ansible-deploy-openstack-stein-multinode/ rel=prev title="Ubuntu 18.04 通过 Kolla Ansible 部署多节点 OpenStack Stein">Ubuntu 18.04 通过 Kolla Ansible 部署多节点 OpenStack Stein
<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class=post-comments><div class=comment-head><div class=comment-headline><i class="fas fa-comments fa-fw"></i>
<span>评论交流</span></div></div><div class=comment-wrap><div><div class=comment-loading><i class="fa fa-sync fa-spin"></i></div><div class=giscus-container></div></div></div></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>&copy;
<span itemprop=copyrightYear>2019 - 2022</span>
<span class=with-love><i class="fa fa-heart"></i></span>
<span class=author itemprop=copyrightHolder>Baitian</span></div><div class=powered-by>由 <a href=https://gohugo.io target=_blank>Hugo</a> & <a href=https://github.com/hugo-next/hugo-theme-next target=_blank>Hugo NexT.Pisces</a> 强力驱动</div></div></footer><script type=text/javascript src=https://unpkg.com/animejs@3.2.1/lib/anime.min.js defer></script>
<script class=next-config data-name=main type=application/json>{"bookmark":{"color":"#222","enable":false,"save":"manual"},"copybtn":true,"darkmode":true,"giscus":{"cfg":{"category":"Comments","categoryid":null,"emit":false,"inputposition":"top","mapping":"title","reactions":false,"repo":"baitian752/baitian752.github.io","repoid":"MDEwOlJlcG9zaXRvcnkyNDQ2MDkwNjk","theme":"preferred_color_scheme"},"js":"https://giscus.app/client.js"},"hostname":"/","i18n":{"empty":"没有找到任何搜索结果：${query}","hits":"","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","placeholder":"搜索..."},"lang":"zh-CN","lazyload":false,"localSearch":{"enable":true,"path":"searchindexes.xml","preload":false,"topnperarticle":-1,"trigger":"auto","unescape":false},"motion":{"async":true,"enable":true,"transition":{"collheader":"fadeInLeft","postblock":"fadeIn","postbody":"fadeInDown","postheader":"fadeInDown","sidebar":"fadeInUp"}},"root":"/","scheme":"Pisces","sidebar":{"display":"post","offset":12,"padding":18,"position":"left","width":256},"vendor":{"plugins":"unpkg","router":"https://unpkg.com"},"version":"4.2.0","waline":{"cfg":{"emoji":false,"imguploader":false,"pageview":true,"placeholder":"请文明发言","requiredmeta":["nick","mail"],"serverurl":null,"wordlimit":200},"css":{"alias":"waline","file":"dist/waline.css","name":"@waline/client","version":"2.6.1"},"js":{"alias":"waline","file":"dist/waline.js","name":"@waline/client","version":"2.6.1"}}}</script><script type=text/javascript src=/js/main.min.a39bf43ceda90a8a424b9bd67fa9ad071d0da51c67ba2ef98477a2bab0cdd005.js defer></script></body></html>